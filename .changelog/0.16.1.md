## 0.16.1 - 01.10.2025

### Highlights
  - Dedicated permission for locking/unlocking weeks
  - New "Partner" field on Customer Projects
  - Entra ID user search backed by MongoDB `graph_users` cache and Microsoft Graph delta sync

### Added
  - New `LOCK_UNLOCK_WEEKS` permission (`a7b8c9d0`) protecting the `lockPeriod` mutation.
  - Added "Partner" field to Customer Project to support subcontractor billing workflows ([#1301](https://github.com/Puzzlepart/did/pull/1301)).
  - Introduced Entra ID user search with persisted `graph_users` collection and delta retrieval to keep cached profiles fresh (current PR).

### Changed
  - Role permissions for authenticated users are now resolved dynamically per request (no logout required after role updates).
  - Webpack Git metadata integration now auto-disables when `git` or `.git` are unavailable (falling back to environment variables or `unknown`), preventing dev container build failures.
  - Express fallback error response changed from 401 to 404 to reduce noisy Unauthorized logs for missing/static assets.
  - JSON 404 responses returned for API/GraphQL style requests and clients that explicitly accept JSON.
  - Applied employment date filtering to Week Status user queries so inactive users no longer appear in reporting ([#1290](https://github.com/Puzzlepart/did/pull/1290)).

### Fixed
  - Development watch task crash due to incorrect `concurrently` promise handling (removed `.result` usage; added robust promise resolution).
  - Silent failure to start webpack watcher inside Docker because `.tasks` directory was ignored; adjusted `.dockerignore` to include only `watch.js`.
  - Potential build crash when `git` binary absent (now gracefully skipped).
  - Reduced log noise by suppressing morgan output for 404 static asset requests (hashed bundles / images between rebuilds).
  - Fixed `UserVacation` tooltip ref error by forwarding refs through the `MenuItem` component to the underlying Fluent UI primitive ([#1304](https://github.com/Puzzlepart/did/pull/1304)).

### CI / Chores
  - Added helper npm scripts `docker:watch` and `docker:rebuild:watch` for a canonical rebuild/start workflow without wiping MongoDB volumes.
  - Added diagnostic logging to watch script (explicit process start lines, colored prefixes, failure summaries).
  - Improved resilience of dev build by auto-detecting absence of Git and avoiding unnecessary image bloat.

### Internal
  - Version bump to 0.16.1

### Notes
This release focuses on permission granularity, session freshness and developer experience improvements.